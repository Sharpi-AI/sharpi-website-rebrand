---
import Logo from "@/components/icons/logo.astro";
import Button from "@/components/ui/button/index.astro";
---

<style is:global>
  .scrolled .entrar-button {
    color: #2563eb !important;
  }

  .scrolled .logo-icon {
    mix-blend-mode: normal !important;
  }

  .scrolled .logo-icon .logo-path {
    fill: #2563eb !important;
    fill-opacity: 1 !important;
  }
</style>
<!-- 
<div class="fixed top-8 left-8 right-0 z-50 flex items-center ">
  <Logo />
</div> -->

<div class="sticky top-0 max-h-0 z-50 overflow-visible w-full">
  <header
    id="header-container"
    class="w-full p-4 flex items-center justify-between transition-transform duration-200 ease-in-out"
    
  >
    <div class="p-4  grid grid-cols-3 w-full ">
      <div class="flex items-center opacity-0 md:opacity-100  ">
        <Logo />
      </div>


      <div class="col-start-2 w-full flex items-center justify-center">
        <div class="w-fit flex items-center justify-between bg-black/20 rounded-lg h-10 p-1 gap-8" style={{
          backdropFilter: "blur(22px)"
        }}>
          <div class="flex items-center justify-center">
            <Button href="/"  variant="ghost" size="lg" class="text-white text-[13px] h-full px-4.5 pt-0.5">
              Home
            </Button>

            <div class="h-5 bg-white w-px" />
            <Button href="/carreiras" target="_blank" variant="ghost" size="lg" class="text-white text-[13px] h-full px-4.5 pt-0.5">
              Carreiras
            </Button>
          </div>
          <Button
            href="https://wa.me/5521984401411?text=Ol%C3%A1%2C%20eu%20gostaria%20de%20saber%20mais%20sobre%20o%20sistema%20da%20Sharpi."
            target="_blank"
            variant="ghost"
            size="lg"
            class="text-white h-full text-[13px] px-3 bg-black/12"
          >
            <span class="sr-only">Agente uma demo</span>

            <svg width="126" height="13" viewBox="0 0 126 13" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M0.5 10L3.997 0.575H5.531L9.08 10H7.65L6.909 7.959H2.58L1.852 10H0.5ZM4.725 1.914L2.983 6.828H6.493L4.725 1.914ZM14.6575 4.111V3.006H15.8405V9.064C15.8405 10.481 15.5805 11.079 15.1775 11.521C14.6705 12.106 13.7995 12.444 12.7595 12.444C11.1475 12.444 10.1075 11.742 9.88651 10.299H11.1475C11.2905 10.923 11.6805 11.404 12.7725 11.404C13.4095 11.404 13.8775 11.235 14.2025 10.884C14.4495 10.611 14.6575 10.312 14.6575 9.337V8.674C14.2285 9.415 13.5655 9.883 12.4345 9.883C10.8875 9.883 9.47051 8.635 9.47051 6.386C9.47051 4.15 10.8875 2.889 12.4345 2.889C13.5655 2.889 14.2285 3.37 14.6575 4.111ZM14.7095 6.386C14.7095 4.618 13.7735 3.903 12.7335 3.903C11.5765 3.903 10.7575 4.774 10.7575 6.386C10.7575 8.011 11.5765 8.882 12.7335 8.882C13.7735 8.882 14.7095 8.154 14.7095 6.386ZM23.7533 6.893H18.3713C18.4103 8.401 19.5023 9.129 20.5293 9.129C21.5693 9.129 22.1413 8.661 22.4403 7.972H23.6623C23.3503 9.168 22.2323 10.169 20.5293 10.169C18.3193 10.169 17.0973 8.583 17.0973 6.516C17.0973 4.293 18.5793 2.889 20.4903 2.889C22.6353 2.889 23.8963 4.67 23.7533 6.893ZM20.4903 3.903C19.4503 3.903 18.4883 4.475 18.3843 5.879H22.5053C22.4663 4.891 21.7513 3.903 20.4903 3.903ZM26.1851 3.006V4.059C26.5881 3.396 27.2641 2.889 28.4471 2.889C30.1371 2.889 30.7481 3.981 30.7481 5.58V10H29.5651V5.931C29.5651 4.852 29.3831 3.916 28.0311 3.916C26.8871 3.916 26.1851 4.683 26.1851 6.204V10H25.0021V3.006H26.1851ZM37.1847 4.111V0.575H38.3677V10H37.1847V8.947C36.7557 9.688 36.0277 10.169 34.8967 10.169C33.2847 10.169 31.9067 8.856 31.9067 6.529C31.9067 4.241 33.2847 2.889 34.8967 2.889C36.0277 2.889 36.7557 3.37 37.1847 4.111ZM37.2367 6.529C37.2367 4.683 36.2487 3.903 35.1957 3.903C33.9867 3.903 33.1937 4.826 33.1937 6.529C33.1937 8.232 33.9867 9.155 35.1957 9.155C36.2487 9.155 37.2367 8.375 37.2367 6.529ZM46.2784 6.893H40.8964C40.9354 8.401 42.0274 9.129 43.0544 9.129C44.0944 9.129 44.6664 8.661 44.9654 7.972H46.1874C45.8754 9.168 44.7574 10.169 43.0544 10.169C40.8444 10.169 39.6224 8.583 39.6224 6.516C39.6224 4.293 41.1044 2.889 43.0154 2.889C45.1604 2.889 46.4214 4.67 46.2784 6.893ZM43.0154 3.903C41.9754 3.903 41.0134 4.475 40.9094 5.879H45.0304C44.9914 4.891 44.2764 3.903 43.0154 3.903ZM54.8111 10V8.999C54.4081 9.662 53.7711 10.169 52.6141 10.169C51.0021 10.169 50.3781 9.077 50.3781 7.478V3.006H51.5611V7.127C51.5611 8.206 51.7301 9.142 53.0301 9.142C54.1611 9.142 54.8111 8.375 54.8111 6.854V3.006H55.9941V10H54.8111ZM58.9237 6.204V10H57.7407V3.006H58.9237V4.059C59.3267 3.396 59.9767 2.889 61.0297 2.889C62.1087 2.889 62.7327 3.344 63.0447 4.124C63.6037 3.253 64.4097 2.889 65.3977 2.889C67.0227 2.889 67.6597 3.981 67.6597 5.58V10H66.4767V5.931C66.4767 4.852 66.2687 3.916 64.9817 3.916C63.9547 3.916 63.2917 4.683 63.2917 6.204V10H62.1087V5.931C62.1087 4.852 61.9007 3.916 60.6137 3.916C59.5867 3.916 58.9237 4.683 58.9237 6.204ZM73.7101 7.075V6.633C71.5651 6.841 70.2001 7.166 70.2001 8.128C70.2001 8.791 70.7071 9.233 71.5521 9.233C72.6571 9.233 73.7101 8.726 73.7101 7.075ZM71.2921 10.169C69.9791 10.169 68.8871 9.441 68.8871 8.154C68.8871 6.503 70.7591 6.009 73.6191 5.697V5.528C73.6191 4.241 72.9171 3.825 72.0331 3.825C71.0451 3.825 70.4861 4.345 70.4341 5.216H69.2121C69.3161 3.708 70.6681 2.863 72.0201 2.863C73.9831 2.863 74.8151 3.76 74.8021 5.749L74.7891 7.361C74.7761 8.544 74.8281 9.337 74.9711 10H73.7751C73.7361 9.74 73.6971 9.454 73.6841 9.038C73.2551 9.766 72.5401 10.169 71.2921 10.169ZM84.1868 4.111V0.575H85.3698V10H84.1868V8.947C83.7578 9.688 83.0298 10.169 81.8988 10.169C80.2868 10.169 78.9088 8.856 78.9088 6.529C78.9088 4.241 80.2868 2.889 81.8988 2.889C83.0298 2.889 83.7578 3.37 84.1868 4.111ZM84.2388 6.529C84.2388 4.683 83.2508 3.903 82.1978 3.903C80.9888 3.903 80.1958 4.826 80.1958 6.529C80.1958 8.232 80.9888 9.155 82.1978 9.155C83.2508 9.155 84.2388 8.375 84.2388 6.529ZM93.2805 6.893H87.8985C87.9375 8.401 89.0295 9.129 90.0565 9.129C91.0965 9.129 91.6685 8.661 91.9675 7.972H93.1895C92.8775 9.168 91.7595 10.169 90.0565 10.169C87.8465 10.169 86.6245 8.583 86.6245 6.516C86.6245 4.293 88.1065 2.889 90.0175 2.889C92.1625 2.889 93.4235 4.67 93.2805 6.893ZM90.0175 3.903C88.9775 3.903 88.0155 4.475 87.9115 5.879H92.0325C91.9935 4.891 91.2785 3.903 90.0175 3.903ZM95.7122 6.204V10H94.5292V3.006H95.7122V4.059C96.1152 3.396 96.7652 2.889 97.8182 2.889C98.8972 2.889 99.5212 3.344 99.8332 4.124C100.392 3.253 101.198 2.889 102.186 2.889C103.811 2.889 104.448 3.981 104.448 5.58V10H103.265V5.931C103.265 4.852 103.057 3.916 101.77 3.916C100.743 3.916 100.08 4.683 100.08 6.204V10H98.8972V5.931C98.8972 4.852 98.6892 3.916 97.4022 3.916C96.3752 3.916 95.7122 4.683 95.7122 6.204ZM106.898 6.529C106.898 8.401 107.912 9.129 108.991 9.129C110.07 9.129 111.084 8.323 111.084 6.529C111.084 4.657 110.07 3.929 108.991 3.929C107.912 3.929 106.898 4.618 106.898 6.529ZM108.991 2.889C110.616 2.889 112.345 3.994 112.345 6.529C112.345 9.064 110.616 10.169 108.991 10.169C107.366 10.169 105.637 9.064 105.637 6.529C105.637 3.994 107.366 2.889 108.991 2.889ZM116.156 5.931H123.774L121.018 3.175L121.746 2.46L125.789 6.503L121.746 10.546L121.018 9.818L123.774 7.075H116.156V5.931Z" fill="white"/>
            </svg>
           </Button>
        </div>
      </div>


      <div class="w-full flex items-center justify-end">

        <Button href="https://app.sharpi.com.br" target="_blank" variant="ghost" size="lg" class="entrar-button text-white text-[13px] transition-colors duration-300">
          Entrar
        </Button>
      </div>
    </div>
  </header>

  <div
    id="page-overlay"
    class="fixed inset-0 bg-white opacity-100 pointer-events-none z-[9999]"
  >
  </div>
</div>

<script>
  import { animate } from "motion";

  function initPageOverlay() {
    const overlay = document.getElementById("page-overlay");
    if (!overlay) return;

    // Fade out overlay before hero animations start
    animate(
      overlay,
      { opacity: [1, 0] },
      {
        duration: 0.4,
        delay: 0.2,
        ease: "easeOut",
      }
    );
  }

  function updateHeaderColors() {
    const heroSection = document.getElementById("hero");
    const headerContainer = document.getElementById("header-container");

    if (!heroSection || !headerContainer) {
      console.log("Hero or header not found");
      return;
    }

    const heroBottom = heroSection.offsetTop + heroSection.offsetHeight;
    const scrollY = window.scrollY;

    console.log("Scroll Y:", scrollY, "Hero Bottom:", heroBottom);

    if (scrollY > heroBottom) {
      headerContainer.classList.add("scrolled");
      console.log("Added scrolled class");
    } else {
      headerContainer.classList.remove("scrolled");
      console.log("Removed scrolled class");
    }
  }

  // Initialize animations when DOM is ready
  function initAnimations() {
    initPageOverlay();
    updateHeaderColors();

    // Add scroll listener
    if (window.lenis) {
      window.lenis.on("scroll", updateHeaderColors);
    } else {
      window.addEventListener("scroll", updateHeaderColors);
    }
  }

  if (document.readyState === "loading") {
    document.addEventListener("DOMContentLoaded", initAnimations);
  } else {
    initAnimations();
  }
</script>
